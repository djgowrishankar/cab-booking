{"ast":null,"code":"var _jsxFileName = \"D:\\\\Cabbooking\\\\Real-Time-Taxi-App\\\\client\\\\src\\\\components\\\\Landing\\\\landing_page.js\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Card, CardContent, CardMedia, Container, createTheme, Grid, Paper, Stack, TextField, ThemeProvider, CssBaseline, Typography } from '@mui/material';\nimport { Timeline, TimelineItem, TimelineSeparator, TimelineConnector, TimelineContent, TimelineDot } from '@mui/lab';\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from \"react-router-dom\";\nimport { useSocket } from \"../../contexts/SocketProvider\";\nimport { v4 as uuidV4 } from \"uuid\";\nimport useLocalStorage from '../../hooks/useLocalStorage';\nimport { useRequests } from '../../contexts/RequestsProvider';\nimport LinearProgressWithLabel from '../Landing/driversProgress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mdTheme = createTheme(); // var socket = Socketio();\n// socket.on(\"connect\", () => {\n//     console.log(\"socket id of landing \", socket.id)\n// })\n\nfunction Home() {\n  _s();\n\n  const location = useLocation();\n  const {\n    createRequests\n  } = useRequests();\n  const {\n    socket,\n    getId\n  } = useSocket();\n  const [requestId, setRequestId] = useLocalStorage('passenger-id');\n  const [driversInfos, setdriversInfos] = useLocalStorage('my-driver');\n  const [progress, setProgress] = useState(10);\n  const [status, setStatus] = useState(false);\n  const [inputLocation, setInputLocation] = useState({\n    pickUp: \"\",\n    destination: \"\"\n  });\n\n  function getLocationInput(value) {\n    return setInputLocation(prev => {\n      return { ...prev,\n        ...value\n      };\n    });\n  }\n\n  useEffect(() => {\n    if (socket != null) {\n      socket.on('get-myDriver', (passengerId, id, driversPhoto, driversName, carsPlateNo) => {\n        setdriversInfos(prevResponse => {\n          if (prevResponse != null) {\n            return [...prevResponse, {\n              passengerId,\n              id,\n              driversPhoto,\n              driversName,\n              carsPlateNo\n            }];\n          } else {\n            return [{\n              passengerId,\n              id,\n              driversPhoto,\n              driversName,\n              carsPlateNo\n            }];\n          }\n        });\n      });\n      return () => socket.off('get-myDriver');\n    }\n  }, [socket]);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress(prevProgress => prevProgress >= 100 ? 100 : prevProgress + 10);\n    }, 800);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  function LinearWithValueLabel() {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(LinearProgressWithLabel, {\n        value: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n\n  function handleRequest(e) {\n    var accepted = 'false';\n    e.preventDefault();\n\n    if (!requestId) {\n      const idHolder = uuidV4();\n      getId(idHolder);\n      setRequestId(idHolder);\n      createRequests(idHolder, inputLocation.pickUp, inputLocation.destination);\n      socket.emit(\"send-request\", idHolder, inputLocation.pickUp, inputLocation.destination); // socket.on(\"get-request\", (id, start, end, accepted) => {\n      //     console.log(start);\n      // })\n      // console.log(typeof socket)\n    } else {\n      createRequests(requestId, inputLocation.pickUp, inputLocation.destination);\n      socket.emit(\"send-request\", requestId, inputLocation.pickUp, inputLocation.destination);\n    }\n  }\n\n  const driverPaper = () => {\n    if (driversInfos != null && !status) {\n      const driversInfo = driversInfos[driversInfos.length - 1];\n      return /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          display: 'flex',\n          mt: 4,\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          sx: {\n            width: 160,\n            display: {\n              xs: 'none',\n              sm: 'block'\n            },\n            borderRadius: '10%',\n            margin: '28px'\n          },\n          image: driversInfo.driversPhoto,\n          alt: driversInfo.driversName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          sx: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            component: \"h1\",\n            variant: \"h5\",\n            sx: {\n              mt: 4,\n              textAlign: 'center'\n            },\n            children: \"Your Taxi Driver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [\"Driver's Name: \", driversInfo.driversName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [\"Car's Plate Number: \", driversInfo.carsPlateNo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          mt: 8,\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          sx: {\n            mt: 4,\n            textAlign: 'center'\n          },\n          children: \"Request A Ride\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Timeline, {\n          sx: {\n            p: 4,\n            ml: \"0%\",\n            mr: \"30%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(TimelineItem, {\n            children: [/*#__PURE__*/_jsxDEV(TimelineSeparator, {\n              children: [/*#__PURE__*/_jsxDEV(TimelineDot, {\n                sx: {\n                  bgcolor: '#fdd835'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TimelineConnector, {\n                sx: {\n                  height: '60px',\n                  bgcolor: '#fdd835'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TimelineContent, {\n              sx: {\n                mt: -2\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                margin: \"none\",\n                fullWidth: true,\n                id: \"pickUp\",\n                label: \"Pick Up Location: \",\n                value: inputLocation.pickUp,\n                onChange: e => {\n                  getLocationInput({\n                    pickUp: e.target.value\n                  });\n                },\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TimelineItem, {\n            children: [/*#__PURE__*/_jsxDEV(TimelineSeparator, {\n              children: /*#__PURE__*/_jsxDEV(TimelineDot, {\n                sx: {\n                  bgcolor: '#fdd835'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TimelineContent, {\n              sx: {\n                mt: -4\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                margin: \"normal\",\n                fullWidth: true,\n                id: \"destination\",\n                label: \"Destination Location: \",\n                value: inputLocation.destination,\n                onChange: e => {\n                  getLocationInput({\n                    destination: e.target.value\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            onClick: handleRequest,\n            variant: \"contained\",\n            sx: {\n              mt: -4,\n              mb: 4\n            },\n            children: \"Request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: mdTheme,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      component: \"main\",\n      sx: {\n        backgroundColor: theme => theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[900],\n        flexGrow: 1,\n        height: '83.6vh',\n        overflow: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        sx: {\n          mt: 4,\n          mb: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          children: driverPaper()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"JxgQ1MSLX+X6KRrVRMsH2lMsoeI=\", false, function () {\n  return [useLocation, useRequests, useSocket, useLocalStorage, useLocalStorage];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/Cabbooking/Real-Time-Taxi-App/client/src/components/Landing/landing_page.js"],"names":["Box","Button","Card","CardContent","CardMedia","Container","createTheme","Grid","Paper","Stack","TextField","ThemeProvider","CssBaseline","Typography","Timeline","TimelineItem","TimelineSeparator","TimelineConnector","TimelineContent","TimelineDot","React","useEffect","useState","useLocation","useSocket","v4","uuidV4","useLocalStorage","useRequests","LinearProgressWithLabel","mdTheme","Home","location","createRequests","socket","getId","requestId","setRequestId","driversInfos","setdriversInfos","progress","setProgress","status","setStatus","inputLocation","setInputLocation","pickUp","destination","getLocationInput","value","prev","on","passengerId","id","driversPhoto","driversName","carsPlateNo","prevResponse","off","timer","setInterval","prevProgress","clearInterval","LinearWithValueLabel","width","handleRequest","e","accepted","preventDefault","idHolder","emit","driverPaper","driversInfo","length","display","mt","mb","xs","sm","borderRadius","margin","flex","textAlign","flexDirection","p","ml","mr","bgcolor","height","target","justifyContent","backgroundColor","theme","palette","mode","grey","flexGrow","overflow"],"mappings":"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","sourcesContent":["import { Box, Button, Card, CardContent, CardMedia, Container, createTheme, \r\n    Grid, Paper, Stack, TextField, ThemeProvider, CssBaseline , Typography, } from '@mui/material';\r\n\r\nimport { Timeline, TimelineItem, TimelineSeparator, \r\n    TimelineConnector, TimelineContent, TimelineDot } from '@mui/lab';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useSocket } from \"../../contexts/SocketProvider\";\r\nimport {v4 as uuidV4} from \"uuid\";\r\nimport useLocalStorage from '../../hooks/useLocalStorage';\r\nimport { useRequests } from '../../contexts/RequestsProvider';\r\nimport LinearProgressWithLabel from '../Landing/driversProgress';\r\n\r\nconst mdTheme = createTheme();\r\n// var socket = Socketio();\r\n// socket.on(\"connect\", () => {\r\n//     console.log(\"socket id of landing \", socket.id)\r\n// })\r\n\r\nfunction Home() {\r\n    const location = useLocation();\r\n    const { createRequests } = useRequests();\r\n    const { socket, getId} = useSocket();\r\n    const [requestId, setRequestId] = useLocalStorage('passenger-id');\r\n    const [driversInfos, setdriversInfos] = useLocalStorage('my-driver');\r\n    const [progress, setProgress] = useState(10);\r\n    const [status, setStatus] = useState(false)\r\n    const [inputLocation, setInputLocation] = useState({\r\n        pickUp: \"\",\r\n        destination: \"\"\r\n    })\r\n    function getLocationInput(value) {\r\n        return setInputLocation((prev) => {\r\n            return {...prev, ...value}\r\n        })\r\n    }\r\n    useEffect(() => {\r\n        if(socket != null) {\r\n            socket.on('get-myDriver', (passengerId, id, driversPhoto, driversName, carsPlateNo) => {\r\n                setdriversInfos(\r\n                    prevResponse => {\r\n                        if(prevResponse != null) {\r\n                            return [ ...prevResponse, { passengerId, id, driversPhoto, driversName, carsPlateNo }];\r\n                        } else {\r\n                            return [{ passengerId, id, driversPhoto, driversName, carsPlateNo }];\r\n                        }\r\n                    }\r\n                )\r\n            })\r\n            return () => socket.off('get-myDriver');\r\n        }\r\n    }, [ socket ])\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n          setProgress((prevProgress) => (prevProgress >= 100 ? 100 : prevProgress + 10));\r\n        }, 800);\r\n        return () => {\r\n          clearInterval(timer);\r\n        };\r\n      }, []);\r\n      \r\n    function LinearWithValueLabel() {\r\n             \r\n          return (\r\n            <Box sx={{ width: '100%' }}>\r\n              <LinearProgressWithLabel value={progress} />\r\n            </Box>\r\n          );\r\n    }\r\n\r\n    function handleRequest(e) {\r\n        var accepted ='false'\r\n        e.preventDefault();\r\n        if(!requestId){\r\n            \r\n            const idHolder = uuidV4();\r\n            getId(idHolder);\r\n            setRequestId(idHolder);\r\n            createRequests(idHolder, inputLocation.pickUp, inputLocation.destination );\r\n            socket.emit(\"send-request\", idHolder, inputLocation.pickUp, inputLocation.destination );\r\n            // socket.on(\"get-request\", (id, start, end, accepted) => {\r\n            //     console.log(start);\r\n            // })\r\n            // console.log(typeof socket)\r\n        } else  {\r\n            createRequests(requestId, inputLocation.pickUp, inputLocation.destination );\r\n            socket.emit(\"send-request\", requestId, inputLocation.pickUp, inputLocation.destination );\r\n        }\r\n    }\r\n    \r\n    const driverPaper = () => {\r\n            if(driversInfos != null && !status) {\r\n                const driversInfo = driversInfos[driversInfos.length - 1]\r\n                return (\r\n                    \r\n                    <Card\r\n                        sx={{\r\n                            display: 'flex',\r\n                            mt:4, mb: 4,\r\n                        }}\r\n                    >\r\n                        <CardMedia \r\n                            component=\"img\"\r\n                            sx={{ width: 160, display: { xs: 'none', sm: 'block'},\r\n                            borderRadius: '10%',\r\n                            margin: '28px'}}\r\n                            image={driversInfo.driversPhoto}\r\n                            alt={driversInfo.driversName}\r\n                            \r\n                        />\r\n                        <CardContent sx={{ flex:1 }}>\r\n                            <Typography component=\"h1\" variant=\"h5\" sx={{ mt: 4,textAlign: 'center'}}>\r\n                                Your Taxi Driver\r\n                            </Typography>\r\n                            <Typography>\r\n                                Driver's Name: {driversInfo.driversName}\r\n                            </Typography>\r\n                            <Typography>\r\n                                Car's Plate Number: {driversInfo.carsPlateNo}\r\n                            </Typography>\r\n                                {/* {LinearWithValueLabel()} */}\r\n                        </CardContent>\r\n                        \r\n                    </Card>\r\n                )\r\n            } else {\r\n                return (\r\n                <Paper\r\n                    sx={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        mt:8, mb: 4,\r\n                    }}\r\n                >\r\n                    <Typography component=\"h1\" variant=\"h5\" sx={{ mt: 4,textAlign: 'center'}}>\r\n                        Request A Ride\r\n                    </Typography>\r\n                    <Timeline sx={{p: 4, ml: \"0%\", mr: \"30%\"}}>\r\n                        <TimelineItem>\r\n                            <TimelineSeparator>\r\n                                <TimelineDot sx={{bgcolor: '#fdd835'}}/>\r\n                                <TimelineConnector sx={{height: '60px', bgcolor: '#fdd835' }} />\r\n                            </TimelineSeparator>\r\n                            <TimelineContent sx={{mt: -2 }}>\r\n                                <TextField\r\n                                    margin=\"none\"\r\n                                    fullWidth\r\n                                    id=\"pickUp\"\r\n                                    label=\"Pick Up Location: \"\r\n                                    value={inputLocation.pickUp}\r\n                                    onChange={(e) => {getLocationInput({pickUp: e.target.value})}}\r\n                                    autoFocus\r\n                                />\r\n                            </TimelineContent>\r\n                        </TimelineItem>\r\n                        <TimelineItem>\r\n                            <TimelineSeparator>\r\n                                <TimelineDot sx={{bgcolor: '#fdd835'}}/>\r\n                            </TimelineSeparator>\r\n                            <TimelineContent sx={{ mt: -4 }}>\r\n                                <TextField\r\n                                    margin=\"normal\"\r\n                                    fullWidth\r\n                                    id=\"destination\"\r\n                                    label=\"Destination Location: \"\r\n                                    value={inputLocation.destination}\r\n                                    onChange={(e) => {getLocationInput({destination: e.target.value})}}\r\n                                />\r\n                            </TimelineContent>\r\n                        </TimelineItem>\r\n                    </Timeline>\r\n                    <Box sx={{ display: 'flex', justifyContent: 'center' }}>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            onClick={handleRequest}\r\n                            variant=\"contained\"\r\n                            sx={{ mt: -4, mb: 4, }}\r\n                        >\r\n                            Request\r\n                        </Button>\r\n                    </Box>\r\n                </Paper>\r\n                )\r\n            }\r\n        }\r\n    \r\n    return (\r\n        <ThemeProvider theme={mdTheme}>\r\n            <Box\r\n                component=\"main\"\r\n                sx={{\r\n                    backgroundColor: (theme) =>\r\n                    theme.palette.mode === 'light'\r\n                    ? theme.palette.grey[100]\r\n                    : theme.palette.grey[900],\r\n                    flexGrow: 1,\r\n                    height: '83.6vh',\r\n                    overflow: 'auto'\r\n                }}\r\n            >\r\n                <Container maxWidth=\"lg\" sx={{ mt:4, mb: 4, }}>\r\n                    <Grid>    \r\n                            {driverPaper()}\r\n                    </Grid>\r\n                </Container>\r\n            </Box>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}